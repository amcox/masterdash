library(lattice)
xyplot(weight ~ Time | Diet, BodyWeight)
set.seed(1)
rpois(5, 2)
?rpois
set.seed(31);#
heightsCM = rnorm(30,mean=188, sd=5);#
weightsK = rnorm(30,mean=84,sd=3); #
hasDaughter = sample(c(TRUE,FALSE),size=30,replace=T); #
dataFrame = data.frame(heightsCM,weightsK,hasDaughter);
heightsCM
dataFrame
dataFrameSubset = dataFrame[heightsCM >188]
dataFrameSubset = dataFrame[heightsCM >188,]
dataFrameSubset
mean(dataFrameSubset$weightsK)
set.seed(41)
cauchyValues <- rcauchy(100)
cauchyValues
set.seed(415)
v <- sample(cauchyValues, 10, replace=TRUE)
v
quarters = current_district.settings[:quarters]#
quarters_as_dates = {}#
quarters.each do |k, v|#
quarters_as_dates[k] = v.begin.to_date..v.end.to_date#
end
pal <- colorRampPalatte(c("red", "yellow", "blue"))
pal <- colorRampPalette(c("red", "yellow", "blue"))
x <- rnorm(100)
plot(x, col=pal(100))
plot(x, col=pal(10))
plot(x, col=pal(100))
?paste0
ls()
update.packages()
install.packages("Rcpp", type="source")#
install.packages("dplyr", type="source")
library(dplyr)
?dplyr
set.seed(124)#
pois <- rpois(100, lambda = 3)#
pois[1:10]
str(pois)
hist(pois)
set.seed(124)#
pois <- rpois(1000, lambda = 3)
str(pois)
hist(pois)
set.seed(124)#
pois <- rpois(1000, lambda = 1)
hist(pois)
set.seed(124)#
pois <- rpois(1000, lambda = 1.5)
hist(pois)
set.seed(124)#
pois <- rpois(1000, lambda = 3)
hist(pois)
set.seed(124)#
pois <- rpois(1000, lambda = 1)
hist(pois)
d <- data.frame(value=pois)
str(d)
d$z <- scale(d$vaule)
d$z <- scale(d$value)
?ecdf
d$percentile <- ecdf(d$value)d$value
d$percentile <- ecdf(d$value)(d$value)
str(d)
d <- d[order(d$value),]
head(d)
unique(d)
mean(d$value)
sd(d$value)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
library(plyr)#
library(dplyr)#
library(gdata)#
library(tidyr)#
library(ggplot2)#
library(scales)#
library(gridExtra)#
library(stringr)#
#
update_functions <- function() {#
	old.wd <- getwd()#
	setwd("functions")#
	sapply(list.files(), source)#
	setwd(old.wd)#
}#
update_functions()#
#
dv <- load_student_vam_data()
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
dv <- load_student_vam_data()
str(dv)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(dv, aes(x=target, y=actual))+#
  geom_point(alpha=.2)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(dv, aes(x=target, y=actual))+#
  geom_point(alpha=.2)+#
  geom_smooth()
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(dv, aes(x=target, y=actual))+#
  geom_point(alpha=.2)+#
  geom_smooth()+#
  geom_abline(intercept=min(actual), slope=1)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(dv, aes(x=target, y=actual))+#
  geom_point(alpha=.2)+#
  geom_smooth()+#
  geom_abline(intercept=min(dv$actual), slope=1)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
min(dv$actual)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(dv, aes(x=target, y=actual))+#
  geom_point(alpha=.2)+#
  geom_smooth()+#
  geom_abline(intercept=100, slope=1)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(dv, aes(x=target, y=actual))+#
  geom_point(alpha=.2)+#
  geom_smooth()+#
  geom_abline(intercept=0, slope=1)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(dv, aes(x=target, y=actual))+#
  geom_point(alpha=.2)+#
  geom_smooth()+#
  geom_abline(intercept=0, slope=1, color='green')
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(dv, aes(x=target, y=actual))+#
  geom_point(alpha=.2)+#
  geom_smooth()+#
  geom_abline(intercept=0, slope=1, color='#00B51B')
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(dv, aes(x=target, y=actual))+#
  geom_point(alpha=.2)+#
  geom_smooth()+#
  geom_abline(intercept=0, slope=1, color='#00C71E')
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(dv, aes(x=target, y=actual))+#
  geom_point(alpha=.2)+#
  geom_smooth()+#
  geom_abline(intercept=0, slope=1, color='#00C71E')+#
  facet_wrap(~subject)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(dv, aes(x=target, y=actual))+#
  geom_point(alpha=.2)+#
  geom_smooth()+#
  geom_abline(intercept=0, slope=1, color='#00C71E')+#
  theme_bw()+#
  coord_fixed()+#
  facet_wrap(~subject)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(dv, aes(x=target, y=actual))+#
  geom_point(alpha=.2)+#
  geom_smooth()+#
  geom_abline(intercept=0, slope=1, color='#00C71E')+#
  scale_x_continuous(breaks=seq(100, 600, 50))+#
  scale_y_continuous(breaks=seq(100, 600, 50))+#
  theme_bw()+#
  coord_fixed()+#
  facet_wrap(~subject)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
de <- get_enrollments_data()
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R/functions')
library(RPostgreSQL)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
de <- get_enrollments_data()
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
con <- prepare_connection()
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
de <- get_enrollments_data()
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
de <- get_enrollments_data(con)
str(de)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
de <- unique(select(de, student_number, grade, school))
str(dv)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
d <- merge(dv, de, by.x='student.id', by.y='student_number')
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(d, aes(x=target, y=actual))+#
  geom_point(alpha=.2)+#
  geom_smooth()+#
  geom_abline(intercept=0, slope=1, color='#00C71E')+#
  scale_x_continuous(breaks=seq(100, 600, 50))+#
  scale_y_continuous(breaks=seq(100, 600, 50))+#
  theme_bw()+#
  coord_fixed()+#
  facet_wrap(school~subject)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(d, aes(x=target, y=actual))+#
  geom_point(alpha=.2)+#
  geom_smooth()+#
  geom_abline(intercept=0, slope=1, color='#00C71E')+#
  scale_x_continuous(breaks=seq(100, 600, 50))+#
  scale_y_continuous(breaks=seq(100, 600, 50))+#
  theme_bw()+#
  coord_fixed()+#
  facet_grid(school~subject)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(d, aes(x=target, y=actual))+#
  geom_point(alpha=.2)+#
  geom_smooth()+#
  geom_abline(intercept=0, slope=1, color='#00C71E')+#
  scale_x_continuous(breaks=seq(100, 600, 50))+#
  scale_y_continuous(breaks=seq(100, 600, 50))+#
  theme_bw()+#
  coord_fixed()+#
  facet_grid(subject~school)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(d, aes(x=target, y=actual))+#
  geom_point(alpha=.2)+#
  geom_smooth()+#
  geom_abline(intercept=0, slope=1, color='#00C71E')+#
  scale_x_continuous(breaks=seq(100, 600, 50))+#
  scale_y_continuous(breaks=seq(100, 600, 50))+#
  theme_bw()+#
  coord_fixed()+#
  facet_grid(subject + grade ~school)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(subset(d, grade != 3), aes(x=target, y=actual))+#
  geom_point(alpha=.2)+#
  geom_smooth()+#
  geom_abline(intercept=0, slope=1, color='#00C71E')+#
  scale_x_continuous(breaks=seq(100, 600, 50))+#
  scale_y_continuous(breaks=seq(100, 600, 50))+#
  theme_bw()+#
  coord_fixed()+#
  facet_grid(school ~ subject + grade)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(subset(d, grade != 3), aes(x=target, y=actual))+#
  geom_point(alpha=.2)+#
  geom_smooth()+#
  geom_abline(intercept=0, slope=1, color='#00C71E')+#
  # scale_x_continuous(breaks=seq(100, 600, 50))+#
  # scale_y_continuous(breaks=seq(100, 600, 50))+#
  theme_bw()+#
  coord_fixed()+#
  facet_grid(school ~ subject + grade)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(subset(d, grade != 3), aes(x=target, y=actual))+#
  geom_point(alpha=.2)+#
  geom_smooth()+#
  geom_abline(intercept=0, slope=1, color='#00C71E')+#
  # scale_x_continuous(breaks=seq(100, 600, 50))+#
  # scale_y_continuous(breaks=seq(100, 600, 50))+#
  theme_bw()+#
  coord_fixed()+#
  labs(x='VAM Target Scaled Score',#
    y='Actual Scaled Score',#
    title='Student Level VAM Results by Subject-School-Grade, 2013-14'#
  )+#
  theme(#
    axis_ticks_x=element_text(size=4)#
  )+#
  facet_grid(school ~ subject + grade)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(subset(d, grade != 3), aes(x=target, y=actual))+#
  geom_point(alpha=.2)+#
  geom_smooth()+#
  geom_abline(intercept=0, slope=1, color='#00C71E')+#
  # scale_x_continuous(breaks=seq(100, 600, 50))+#
  # scale_y_continuous(breaks=seq(100, 600, 50))+#
  theme_bw()+#
  coord_fixed()+#
  labs(x='VAM Target Scaled Score',#
    y='Actual Scaled Score',#
    title='Student Level VAM Results by Subject-School-Grade, 2013-14'#
  )+#
  theme(#
    axis_labels_x=element_text(size=4)#
  )+#
  facet_grid(school ~ subject + grade)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(subset(d, grade != 3), aes(x=target, y=actual))+#
  geom_point(alpha=.2)+#
  geom_smooth()+#
  geom_abline(intercept=0, slope=1, color='#00C71E')+#
  # scale_x_continuous(breaks=seq(100, 600, 50))+#
  # scale_y_continuous(breaks=seq(100, 600, 50))+#
  theme_bw()+#
  coord_fixed()+#
  labs(x='VAM Target Scaled Score',#
    y='Actual Scaled Score',#
    title='Student Level VAM Results by Subject-School-Grade, 2013-14'#
  )+#
  theme(#
    axis.text=element_text(size=4)#
  )+#
  facet_grid(school ~ subject + grade)
?geom_smooth
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(subset(d, grade != 3), aes(x=target, y=actual))+#
  geom_point(alpha=.2)+#
  geom_smooth(fill=NA)+#
  geom_abline(intercept=0, slope=1, color='#00C71E')+#
  # scale_x_continuous(breaks=seq(100, 600, 50))+#
  # scale_y_continuous(breaks=seq(100, 600, 50))+#
  theme_bw()+#
  coord_fixed()+#
  labs(x='VAM Target Scaled Score',#
    y='Actual Scaled Score',#
    title='Student Level VAM Results by Subject-School-Grade, 2013-14'#
  )+#
  theme(#
    axis.text=element_text(size=5)#
  )+#
  facet_grid(school ~ subject + grade)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(subset(d, grade != 3), aes(x=target, y=actual))+#
  geom_point(alpha=.2)+#
  geom_smooth(fill=NA)+#
  geom_abline(intercept=0, slope=1, color='#00C71E')+#
  # scale_x_continuous(breaks=seq(100, 600, 50))+#
  # scale_y_continuous(breaks=seq(100, 600, 50))+#
  theme_bw()+#
  # coord_fixed()+#
  labs(x='VAM Target Scaled Score',#
    y='Actual Scaled Score',#
    title='Student Level VAM Results by Subject-School-Grade, 2013-14'#
  )+#
  theme(#
    axis.text=element_text(size=5)#
  )+#
  facet_grid(school ~ subject + grade)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(subset(d, grade != 3), aes(x=target, y=actual))+#
  geom_point(alpha=.2)+#
  geom_smooth(fill=NA)+#
  geom_abline(intercept=0, slope=1, color='#00C71E')+#
  # scale_x_continuous(breaks=seq(100, 600, 50))+#
  # scale_y_continuous(breaks=seq(100, 600, 50))+#
  theme_bw()+#
  # coord_fixed()+#
  labs(x='VAM Target Scaled Score',#
    y='Actual Scaled Score',#
    title='Student Level VAM Results by Subject-School-Grade, 2013-14'#
  )+#
  theme(#
    axis.text=element_text(size=7)#
  )+#
  facet_grid(school ~ subject + grade)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(subset(d, grade != 3), aes(x=target, y=actual))+#
  geom_point(alpha=.2)+#
  geom_smooth(fill=NA)+#
  geom_abline(intercept=0, slope=1, color='#00C71E')+#
  # scale_x_continuous(breaks=seq(100, 600, 50))+#
  # scale_y_continuous(breaks=seq(100, 600, 50))+#
  theme_bw()+#
  # coord_fixed()+#
  labs(x='VAM Target Scaled Score',#
    y='Actual Scaled Score',#
    title='Student Level VAM Results by Subject-School-Grade, 2013-14'#
  )+#
  theme(#
    axis.text=element_text(size=7)#
  )+#
  facet_grid(school ~ subject)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(subset(d, grade != 3), aes(x=target, y=actual))+#
  geom_point(alpha=.2)+#
  geom_smooth(fill=NA)+#
  geom_abline(intercept=0, slope=1, color='#00C71E')+#
  # scale_x_continuous(breaks=seq(100, 600, 50))+#
  # scale_y_continuous(breaks=seq(100, 600, 50))+#
  theme_bw()+#
  # coord_fixed()+#
  labs(x='VAM Target Scaled Score',#
    y='Actual Scaled Score',#
    title='Student Level VAM Results by Subject-School-Grade, 2013-14'#
  )+#
  theme(#
    axis.text=element_text(size=7)#
  )+#
  facet_grid(subject ~ school)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(subset(d, grade != 3), aes(x=target, y=actual))+#
  geom_point(alpha=.2)+#
  geom_smooth(fill=NA)+#
  geom_abline(intercept=0, slope=1, color='#00C71E')+#
  # scale_x_continuous(breaks=seq(100, 600, 50))+#
  # scale_y_continuous(breaks=seq(100, 600, 50))+#
  theme_bw()+#
  # coord_fixed()+#
  labs(x='VAM Target Scaled Score',#
    y='Actual Scaled Score',#
    title='Student Level VAM Results by Subject-School, 2013-14'#
  )+#
  theme(#
    axis.text=element_text(size=7)#
  )+#
  facet_grid(~subject)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
p <- ggplot(subset(d, grade != 3), aes(x=target, y=actual))+#
  geom_point(alpha=.2)+#
  geom_smooth(fill=NA)+#
  geom_abline(intercept=0, slope=1, color='#00C71E')+#
  theme_bw()+#
  labs(x='VAM Target Scaled Score',#
    y='Actual Scaled Score',#
    title='Student Level VAM Results by Subject-School-Grade, 2013-14'#
  )+#
  theme(#
    axis.text=element_text(size=7)#
  )+#
  facet_grid(school ~ subject + grade)#
save_plot_as_pdf(p, 'Student Level VAM Results by Subject-School-Grade, 2013-14')#
p <- ggplot(subset(d, grade != 3), aes(x=target, y=actual))+#
  geom_point(alpha=.2)+#
  geom_smooth(fill=NA)+#
  geom_abline(intercept=0, slope=1, color='#00C71E')+#
  # scale_x_continuous(breaks=seq(100, 600, 50))+#
  # scale_y_continuous(breaks=seq(100, 600, 50))+#
  theme_bw()+#
  # coord_fixed()+#
  labs(x='VAM Target Scaled Score',#
    y='Actual Scaled Score',#
    title='Student Level VAM Results by Subject-School, 2013-14'#
  )+#
  theme(#
    axis.text=element_text(size=7)#
  )+#
  facet_grid(subject ~ school)#
save_plot_as_pdf(p, 'Student Level VAM Results by Subject-School, 2013-14')#
#
p <- ggplot(subset(d, grade != 3), aes(x=target, y=actual))+#
  geom_point(alpha=.2)+#
  geom_smooth(fill=NA)+#
  geom_abline(intercept=0, slope=1, color='#00C71E')+#
  # scale_x_continuous(breaks=seq(100, 600, 50))+#
  # scale_y_continuous(breaks=seq(100, 600, 50))+#
  theme_bw()+#
  # coord_fixed()+#
  labs(x='VAM Target Scaled Score',#
    y='Actual Scaled Score',#
    title='Student Level VAM Results by Subject, 2013-14'#
  )+#
  theme(#
    axis.text=element_text(size=7)#
  )+#
  facet_grid(~subject)#
save_plot_as_pdf(p, 'Student Level VAM Results by Subject, 2013-14')
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
make_vam_scatterplot <- function(d, title) {#
  ggplot(subset(d, grade != 3), aes(x=target, y=actual))+#
    geom_point(alpha=.2)+#
    geom_smooth(fill=NA)+#
    geom_abline(intercept=0, slope=1, color='#00C71E')+#
    theme_bw()+#
    labs(x='VAM Target Scaled Score',#
      y='Actual Scaled Score',#
      title=title#
    )+#
    theme(#
      axis.text=element_text(size=7)#
    )#
}#
p <- make_vam_scatterplot(d, 'Student Level VAM Results by Subject-School-Grade, 2013-14'))+#
  facet_grid(school ~ subject + grade)#
save_plot_as_pdf(p, 'Student Level VAM Results by Subject-School-Grade, 2013-14')#
p <- make_vam_scatterplot(d, 'Student Level VAM Results by Subject-School, 2013-14'))+#
  facet_grid(subject ~ school)#
save_plot_as_pdf(p, 'Student Level VAM Results by Subject-School, 2013-14')#
#
p <- make_vam_scatterplot(d, 'Student Level VAM Results by Subject, 2013-14'))+#
  facet_grid(~subject)#
save_plot_as_pdf(p, 'Student Level VAM Results by Subject, 2013-14')
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
make_vam_scatterplot <- function(d, title) {#
  ggplot(subset(d, grade != 3), aes(x=target, y=actual))+#
    geom_point(alpha=.2)+#
    geom_smooth(fill=NA)+#
    geom_abline(intercept=0, slope=1, color='#00C71E')+#
    theme_bw()+#
    labs(x='VAM Target Scaled Score',#
      y='Actual Scaled Score',#
      title=title#
    )+#
    theme(#
      axis.text=element_text(size=7)#
    )#
}#
p <- make_vam_scatterplot(d, 'Student Level VAM Results by Subject-School-Grade, 2013-14')+#
  facet_grid(school ~ subject + grade)#
save_plot_as_pdf(p, 'Student Level VAM Results by Subject-School-Grade, 2013-14')#
p <- make_vam_scatterplot(d, 'Student Level VAM Results by Subject-School, 2013-14')+#
  facet_grid(subject ~ school)#
save_plot_as_pdf(p, 'Student Level VAM Results by Subject-School, 2013-14')#
#
p <- make_vam_scatterplot(d, 'Student Level VAM Results by Subject, 2013-14')+#
  facet_grid(~subject)#
save_plot_as_pdf(p, 'Student Level VAM Results by Subject, 2013-14')
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ds <- load_star_data()
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
update_functions()
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ds <- load_star_data()
str(ds)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ds <- select(ds, subject, StudentId:test.distance)
str(ds)
unique(ds$subject)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ds$subject[ds$subject == 'reading'] <- 'ela'
str(d)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
df.s <- merge(d, ds, by.x=c('student.id', 'subject'), by.y=c('StudentId', 'subject'))
str(df.s)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(df.s, aes(y=actual-target, x=modeled.year.growth))+#
  geom_point()
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(df.s, aes(y=actual-target, x=modeled.year.growth))+#
  geom_point(alpha=.2)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(subset(df.s, n > 3 & range < 6), aes(y=actual-target, x=modeled.year.growth))+#
  geom_point(alpha=.2)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(subset(df.s, n > 3 & range < 6), aes(y=actual-target, x=modeled.year.growth))+#
  geom_point(alpha=.2)+#
  geom_smooth()
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(subset(df.s, n > 3 & range < 6), aes(y=actual-target, x=modeled.year.growth))+#
  geom_point(alpha=.2)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(subset(df.s, n > 3 & range < 6), aes(y=actual-target, x=modeled.year.gap.growth))+#
  geom_point(alpha=.2)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(subset(df.s, n > 3 & range < 6), aes(y=actual-target, x=modeled.year.growth))+#
  geom_point(alpha=.2)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(subset(df.s, n > 3 & range < 6), aes(y=actual-target, x=modeled.year.gap.growth))+#
  geom_point(alpha=.2)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(subset(df.s, n > 3 & range < 6), aes(y=actual-target, x=modeled.year.gap.growth))+#
  geom_point(alpha=.2)+#
  geom_smooth()
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(subset(df.s, n > 3 & range < 6 & abs(modeled.year.growth) < 5), aes(y=actual-target, x=modeled.year.gap.growth))+#
  geom_point(alpha=.2)+#
  geom_smooth()
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(subset(df.s, n > 3 & range < 6 & abs(modeled.year.growth) < 5), aes(y=actual-target, x=modeled.year.gap.growth))+#
  geom_point(alpha=.2)+#
  geom_smooth()+#
  labs(x='Modeled Year Gap Growth (Negative is Good)',#
    y='Difference Between VAM Actual and Target (Positive is Good)',#
    title='Student VAM Scores and STAR Growth'#
  )+#
  theme_bw()+#
  facet_grid(~subject)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(subset(df.s, n > 3 & range < 6 & abs(modeled.year.growth) < 5), aes(y=actual-target, x=modeled.year.gap.growth))+#
  geom_point(alpha=.2)+#
  geom_smooth()+#
  labs(x='Modeled Year Gap Growth (Negative is Good)',#
    y='Difference Between VAM Actual and Target (Positive is Good)',#
    title='Student VAM Scores and STAR Growth'#
  )+#
  theme_bw()+#
  facet_grid(school~subject)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(subset(df.s, n > 3 & range < 6 & abs(modeled.year.growth) < 5), aes(y=actual-target, x=modeled.year.gap.growth))+#
  geom_point(alpha=.2)+#
  geom_smooth()+#
  labs(x='Modeled Year Gap Growth (Negative is Good)',#
    y='Difference Between VAM Actual and Target (Positive is Good)',#
    title='Student VAM Scores and STAR Growth'#
  )+#
  theme_bw()+#
  facet_grid(grade~subject)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(subset(df.s, n > 3 & range < 6 & abs(modeled.year.growth) < 5), aes(y=actual-target, x=modeled.year.gap.growth))+#
  geom_point(alpha=.2)+#
  geom_smooth()+#
  labs(x='Modeled Year Gap Growth (Negative is Good)',#
    y='Difference Between VAM Actual and Target (Positive is Good)',#
    title='Student VAM Scores and STAR Growth'#
  )+#
  theme_bw()+#
  facet_grid(subject~grade)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(subset(df.s, n > 3 & range < 6 & abs(modeled.year.growth) < 5 & grade > 3), aes(y=actual-target, x=modeled.year.gap.growth))+#
  geom_point(alpha=.2)+#
  geom_smooth()+#
  labs(x='Modeled Year Gap Growth (Negative is Good)',#
    y='Difference Between VAM Actual and Target (Positive is Good)',#
    title='Student VAM Scores and STAR Growth'#
  )+#
  theme_bw()+#
  facet_grid(subject~grade)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
p <- ggplot(subset(df.s, n > 3 & range < 6 & abs(modeled.year.growth) < 5 & grade > 3), aes(y=actual-target, x=modeled.year.gap.growth))+#
  geom_point(alpha=.2)+#
  geom_smooth()+#
  labs(x='Modeled Year Gap Growth (Negative is Good)',#
    y='Difference Between VAM Actual and Target (Positive is Good)',#
    title='Student VAM Scores and STAR Growth'#
  )+#
  theme_bw()+#
  facet_grid(subject~grade)#
save_plot_as_pdf(p, 'Student VAM Scores and STAR Growth, By Grade')
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
p <- ggplot(subset(df.s, n > 3 & range < 6 & abs(modeled.year.growth) < 5 & grade > 3), aes(y=actual-target, x=modeled.year.gap.growth))+#
  geom_point(alpha=.2)+#
  geom_smooth()+#
  labs(x='Modeled Year Gap Growth (Negative is Good)',#
    y='Difference Between VAM Actual and Target (Positive is Good)',#
    title='Student VAM Scores and STAR Growth'#
  )+#
  theme_bw()+#
  facet_grid(~subject)#
save_plot_as_pdf(p, 'Student VAM Scores and STAR Growth')
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
df <- get_single_score_per_student_with_student_data(con)#
df <- subset(df, test_name == 'L14' & achievement_level %in% leap.als)#
df <- df[, c('subject', 'achievement_level', 'grade', 'school', 'student_number')]#
#
# Get report card data#
d.rc <- load_report_card_data()#
d.rc <- d.rc[, c('Marking.Period', 'External.ID', 'Course.Grade', 'Course.Name', 'Original.Score')]#
names(d.rc) <- c('marking.period', 'student_number', 'course.grade', 'subject', 'score')#
d.rc <- subset(d.rc, subject %in% c('ELA', 'Math', 'Science', 'Social Studies'))#
d.rc$subject <- str_replace_all(d.rc$subject, 'ELA', 'ela')#
d.rc$subject <- str_replace_all(d.rc$subject, 'Math', 'math')#
d.rc$subject <- str_replace_all(d.rc$subject, 'Science', 'sci')#
d.rc$subject <- str_replace_all(d.rc$subject, 'Social Studies', 'soc')#
d.rc <- d.rc %>% group_by(marking.period, student_number, subject) %>% summarize(score=mean(score, na.rm=T))#
#
d.c <- merge(df, d.rc)#
d.c$grade.category <- cut_grade_categories(d.c$grade)
str(d.c)
str(d)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
dg <- merge(d.c, select(d, student.id:subject), by.x=c('student_number', 'subject'), by.y=c('student.id', 'subject'))
str(dg)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(subset(dg, quarter == 3), aes(x=score, y=actual-target))+#
geom_point()
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(subset(dg, marking.period == 'Q3'), aes(x=score, y=actual-target))+#
geom_point()
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(subset(dg, marking.period == 'Q3'), aes(x=score, y=actual-target))+#
  geom_point(alpha=.2)+#
  geom_smooth()
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(subset(dg, marking.period == 'Q3'), aes(x=score, y=actual-target))+#
  geom_point(alpha=.2)+#
  geom_smooth()+#
  facet_grid(~subject)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(subset(dg, marking.period == 'Q3'), aes(x=score, y=actual-target))+#
  geom_point(alpha=.2)+#
  geom_smooth()+#
  theme_bw()+#
  labs(x='Quarter 3 Percent Grade',#
    y='Difference Between VAM Actual and Target (Positive is Good)',#
    title='Student VAM Scores and Gradebook Grades'#
  )+#
  facet_grid(~subject)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
p <- ggplot(subset(dg, marking.period == 'Q3'), aes(x=score, y=actual-target))+#
  geom_point(alpha=.2)+#
  geom_smooth()+#
  theme_bw()+#
  labs(x='Quarter 3 Percent Grade',#
    y='Difference Between VAM Actual and Target (Positive is Good)',#
    title='Student VAM Scores and Gradebook Grades'#
  )+#
  facet_grid(~subject)#
save_plot_as_pdf(p, 'Student VAM Scored and Grades, Q3')
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(subset(dg), aes(x=score, y=actual-target))+#
  geom_point(alpha=.2)+#
  geom_smooth()+#
  theme_bw()+#
  labs(x='Percent Grade',#
    y='Difference Between VAM Actual and Target (Positive is Good)',#
    title='Student VAM Scores and Gradebook Grades'#
  )+#
  facet_grid(marking.period~subject)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(subset(dg), aes(x=score, y=actual-target))+#
  geom_point(alpha=.2)+#
  geom_smooth()+#
  theme_bw()+#
  labs(x='Percent Grade',#
    y='Difference Between VAM Actual and Target (Positive is Good)',#
    title='Student VAM Scores and Gradebook Grades'#
  )+#
  facet_grid(subject~marking.period)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
p <- ggplot(subset(dg, marking.period == 'Q3'), aes(x=score, y=actual-target))+#
  geom_point(alpha=.2)+#
  geom_smooth()+#
  theme_bw()+#
  labs(x='Quarter 3 Percent Grade',#
    y='Difference Between VAM Actual and Target (Positive is Good)',#
    title='Student VAM Scores and Gradebook Grades'#
  )+#
  facet_grid(~subject)#
save_plot_as_pdf(p, 'Student VAM Scored and Grades, Q3')#
#
p <- ggplot(subset(dg), aes(x=score, y=actual-target))+#
  geom_point(alpha=.2)+#
  geom_smooth()+#
  theme_bw()+#
  labs(x='Percent Grade',#
    y='Difference Between VAM Actual and Target (Positive is Good)',#
    title='Student VAM Scores and Gradebook Grades'#
  )+#
  facet_grid(subject~marking.period)#
save_plot_as_pdf(p, 'Student VAM Scored and Grades, By Quarter')
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
df <- get_single_score_per_student_with_student_data(con)#
#
get_matched_bench_leap_scores <- function(d, bench.name) {#
  d.b <- subset(df, test_name == bench.name)#
  d.l14 <- subset(df, test_name == 'L14' & achievement_level %in% leap.als)#
#
  d.bs <- d.b[, c("student_id", "subject", "achievement_level", "percent", "grade", "school")]#
  names(d.bs)[names(d.bs) == 'achievement_level'] <- 'b.al'#
  names(d.bs)[names(d.bs) == 'percent'] <- 'b.percent'#
  d.l14s <- d.l14[, c("student_id", "subject", "achievement_level", "scaled_score", "grade", "school")]#
  names(d.l14s)[names(d.l14s) == 'achievement_level'] <- 'l14.al'#
  names(d.l14s)[names(d.l14s) == 'scaled_score'] <- 'l14.scaled_score'#
#
  dm <- merge(d.bs, d.l14s)#
}#
#
db <- get_matched_bench_leap_scores(df, "B3")
str(db)
str(df)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
db <- merge(df, d, by.x=c('student_number', 'subject'), by.y=c('student.id', 'subject'))
str(db)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
db <- merge(df, select(d, student.id:subject, by.x=c('student_number', 'subject'), by.y=c('student.id', 'subject'))
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
db <- merge(df, select(d, student.id:subject), by.x=c('student_number', 'subject'), by.y=c('student.id', 'subject'))
str(db)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(subset(db, test_name == 'B3'), aes(x=percent, y=actual-target))+#
  geom_point()
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(subset(db, test_name == 'B3'), aes(x=percent, y=actual-target))+#
  geom_point(alpha=.3)+#
  facet_grid(~subject)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(subset(db, test_name == 'B3'), aes(x=percent, y=actual-target))+#
  geom_point(alpha=.3)+#
  geom_smooth()+#
  facet_grid(~subject)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(subset(db, test_name == 'B3'), aes(x=percent, y=actual-target))+#
  geom_point(alpha=.3)+#
  geom_smooth()+#
  theme_bw()+#
  labs(x='Percent Correct',#
    y='Difference Between VAM Actual and Target (Positive is Good)',#
    title='Student VAM and Benchmark 3 Scores'#
  )+#
  facet_grid(~subject)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(subset(db, test_name == 'B3'), aes(x=percent, y=actual-target))+#
  geom_point(alpha=.3)+#
  geom_smooth()+#
  theme_bw()+#
  scale_x_continuous(labels=percent)#
  labs(x='Percent Correct',#
    y='Difference Between VAM Actual and Target (Positive is Good)',#
    title='Student VAM and Benchmark 3 Scores'#
  )+#
  facet_grid(~subject)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(subset(db, test_name == 'B3'), aes(x=percent, y=actual-target))+#
  geom_point(alpha=.3)+#
  geom_smooth()+#
  theme_bw()+#
  scale_x_continuous(labels=percent)+#
  labs(x='Percent Correct',#
    y='Difference Between VAM Actual and Target (Positive is Good)',#
    title='Student VAM and Benchmark 3 Scores'#
  )+#
  facet_grid(~subject)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
p <- ggplot(subset(db, test_name == 'B3'), aes(x=percent, y=actual-target))+#
  geom_point(alpha=.3)+#
  geom_smooth()+#
  theme_bw()+#
  scale_x_continuous(labels=percent)+#
  labs(x='Percent Correct',#
    y='Difference Between VAM Actual and Target (Positive is Good)',#
    title='Student VAM and Benchmark 3 Scores'#
  )+#
  facet_grid(~subject)#
save_plot_as_pdf(p, 'Student VAM Scores and Benchmark 3')
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(subset(db, test_name == 'B1'), aes(x=percent, y=actual-target))+#
  geom_point(alpha=.3)+#
  geom_smooth()+#
  theme_bw()+#
  scale_x_continuous(labels=percent)+#
  labs(x='Percent Correct',#
    y='Difference Between VAM Actual and Target (Positive is Good)',#
    title='Student VAM and Benchmark 3 Scores'#
  )+#
  facet_grid(~subject)
setwd('/Users/Andrew/Dropbox/ReNew/Data Analysis/masterdash/analysis/R')
ggplot(subset(db, test_name == 'B2'), aes(x=percent, y=actual-target))+#
  geom_point(alpha=.3)+#
  geom_smooth()+#
  theme_bw()+#
  scale_x_continuous(labels=percent)+#
  labs(x='Percent Correct',#
    y='Difference Between VAM Actual and Target (Positive is Good)',#
    title='Student VAM and Benchmark 3 Scores'#
  )+#
  facet_grid(~subject)
